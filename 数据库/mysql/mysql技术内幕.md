# 序言

    数据库技术是日常开发中常用的技术之一，但自己对数据库的了解就局限在“增删查改”，于是打算细读《MySQL技术内幕 InnoDB存储引擎》来提升自己对MySQLl数据库的了解
# 数据库与数据库实例的区别
- 数据库：物理操作系统文件或其它形式文件类型的集合
- 实例：MySQL数据库由**后台线程**以及**一个共享内存区**组成。共享内存的数据可以被运行的后台线程共享,数据库实例操作数据库文件
- 非集群环境:一个数据库对应一个数据库实例，一个实例对应一个数据库；集群环境：可能存在一个数据库被多个数据实例使用
- 实例在操作系统中表现为一个进程
# MySQL架构原理图
![](./picture/mysql_arch.png)

    存储引擎室基于表的
    InnoDB存储引擎,面向在线事务处理(OLTP),有以下特性：
    1.高并发性(通过MVCC实现)
    2.默认隔离级别REPEATABLE
    3.采用聚集(clustered)方式进行数据存储，没有主键时，自动生成主键(6字节的ROWID)

    MyISAM存储,面向OLAP,有以下特性:
    1.不支持事务，表锁设计
    2.支持全文检索
    3.缓冲池只缓存索引文件，不缓存数据文件

    NDB存储引擎，集群存储引擎，有以下特性：
    1.数据全部放内存(主键查找速度极快)
    2.连接操作在数据库层完成

    Memory引擎，适用于存储临时表，纬度表，有以下特性：
    1.将表中数据存放到内存
    2.只支持表所，并发性能差
    3.不支持TEXT和BLOB列类型

    Archive存储引擎，提供高速的插入和压缩功能：
    1.只支持INSERT和SELECT操作
    2.使用zlib算法压缩数据行

    总结：
    1.支持全文索引的引擎有：MyISAM,InnoDB,Sphinx

# MySQL数据库的连接方式
- TCP/IP 客户端与数据库实例可以不在同一台服务器上,连接时会检查USER表

        mysql -h服务端ip地址 -u用户名 -p
- 命名管道和共享内存，适用于windows平台，客户端与数据库实例在同一台服务器

        需要在mysql配置文件中添加 --shared-memory参数
        客户端连接时需使用--protocal=memory
- UNIX套接字，客户端与数据库实例在同一台服务器

        需配置套接字路径
        --socket=/path.../...sock

# InnoDB体系架构
![](./picture/innodb_arch.png)

        后台线程的作用：
        1.负责刷新内存池中的数据
        2.将修改的数据刷新到磁盘

        内存：
        1.缓冲池：innodb是基于磁盘存储的，记录按页管理，为提高访问速度，事先将部分数据缓存到内存，如果在内存中找到，就不会读取磁盘中的数据
        缓冲池的大小可以通过参数 innodb_buffer_pool_size 来设置
        缓冲池的实例数目通过参数 innodb_buffer_pool_instances 来设置
![](./picture/innodb_memory_arch.png)



